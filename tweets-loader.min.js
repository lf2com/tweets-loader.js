!function i(u,o,c){function s(t,e){if(!o[t]){if(!u[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[t]={exports:{}};u[t][0].call(a.exports,function(e){return s(u[t][1][e]||e)},a,a.exports,i,u,o,c)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("./libs/tweets-loader"),i=(n=a)&&n.__esModule?n:{default:n};if(r.default=i.default,self&&self instanceof Object&&self===self.self){var u=function(){return i.default.apply(void 0,arguments)};u.parseTweet=a.parseTweet,u.parseTweets=a.parseTweets,u.parseCode=a.parseCode,self.TweetsLoader=u}},{"./libs/tweets-loader":3}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=r.isnum=function(e){return!isNaN(e)};r.isint=function(e){return n(e)&&e===(0|e)},r.isstr=function(e){return"string"==typeof e},r.isfunc=function(e){return"function"==typeof e}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseCode=r.parseTweets=r.parseTweet=void 0;function o(e,t,r){var n=(t=t.split(".")).pop(),a=t.reduce(function(e,t){return e[t]=e[t]||{}},e);return a[n]=(0,i.isfunc)(r)?r(a[n],e):r,e}function s(e,t){for(var r=(0,i.isfunc)(t)?t:function(e){return e.matches(t)};e;){if(r(e))return e;e=e.parentNode}return null}function l(e,t){return e.matches(t)?e:e.querySelector(t)}function d(e,t){var r=1<arguments.length&&void 0!==t&&t;return Array.prototype.map.call(e.childNodes,function(e){return Node.TEXT_NODE===e.nodeType?e.textContent:r&&e.matches("[class*=hidden]")?"":e.childNodes.length?d(e,r):/^img$/i.test(e.nodeName)?e.getAttribute("alt"):/^element:url$/.test(e.getAttribute("data-scribe"))?Array.prototype.map.call(e.childNodes,function(e){return e.textContent}).join("").trim():e.textContent}).join("")}function n(t){try{return(0,i.isstr)(t)?u(t):h(t)}catch(e){return a(t)}}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=e("./stdlib"),c=3e3,a=r.parseTweet=function u(e,t){if(!e)throw new Error("Not assign DOM to parse");if(!e instanceof Element)throw new Error("Invalid DOM");var c=t||e.matches("[data-tweet-id]")?e:l(e,"[data-tweet-id]");return o(Array.prototype.reduce.call(c.querySelectorAll("[data-scribe]"),function(e,r){if(!function(e,t){var r=s(t,"[data-tweet-id]");return r&&e.getAttribute("data-tweet-id")===r.getAttribute("data-tweet-id")}(c,r))return e;var t=r.getAttribute("data-scribe").split(":"),n=p(t,2),a=n[0],i=n[1];switch(a){case"section":switch(i){case"subject":break;case"quote":return o(e,"medias",function(e){return(e||[]).concat(f({type:"tweet"},u(l(r,"[data-tweet-id]"))))});case"conversation":return o(e,"reply",u(l(r,"[data-tweet-id]")))}break;case"component":switch(i){case"author":case"tweet":case"actions":break;case"card":return o(e,"medias",Array.prototype.filter.call(r.querySelectorAll("a"),function(e){return e.querySelector("img")}).map(function(e){var t,r,n,a,i=e.querySelector("img");return f({url:e.href},e.querySelector('[data-scribe="element:play_button"]')?{type:"video",name:i.alt,image:{ref:i.getAttribute("data-image"),url:i.src}}:i.title.length?{type:"image",name:i.title,image:{width:parseInt(i.getAttribute("width")),height:parseInt(i.getAttribute("height")),ref:i.getAttribute("data-image"),url:i.src}}:f({type:"url",image:{url:i.src}},(t=e.querySelectorAll("[dir]"),r=(t=Array.prototype.slice.call(t)).shift(),n=t.pop(),a=t.pop(),{name:d(r),description:a?d(a):null,domain:d(n)})))}))}break;case"element":switch(i){case"user_link":return o(e,"author.url",r.href);case"avatar":return o(e,"author.avatar",r.getAttributeNames().filter(function(e){return/^data-src-/.test(e)}).map(function(e){return{type:e.replace(/^data-src-/,""),url:r.getAttribute(e)}}));case"name":return o(e,"author.name",r.title);case"screen_name":return o(e,"author.account",r.title.substr(1));case"logo":break;case"verified_badge":return o(e,"author.verified",!0);case"heart":return o(e,"like.url",s(r,"[href]").href);case"heart_count":return o(e,"like.count",parseInt(d(r).replace(/[^\d]/g,"")));case"full_timestamp":case"mini_timestamp":return o(e,"date",new Date(l(r,"time").getAttribute("datetime")));case"mention":return o(e,"mentions",function(e){var t;return-1!==(e=e||[]).findIndex(function(e){return e.url===r.href})?e:e.concat(f({},{display:t=d(r),account:t.substr(1)},{id:r.getAttribute("data-mentioned-user-id"),url:r.href}))});case"hashtag":return o(e,"hashtags",function(e){var t;return-1!==(e=e||[]).findIndex(function(e){return e.url===r.href})?e:e.concat(f({},{display:t=d(r),name:t.substr(1)},{url:r.href}))});case"url":return o(e,"urls",function(e){return(e||[]).concat({raw:r.title,display:d(r,!0),url:r.href})});case"play_button":case"poster_image":break;case"twitter":case"facebook":case"linkedin":case"tumblr":return o(e,"share",function(e){return(e||[]).concat({type:i,url:r.href})})}}return e},{id:t||c.getAttribute("data-tweet-id")||null,url:c.getAttribute("cite")||c.getAttribute("data-click-to-open-target")||c.href||null,author:{account:null,name:null,url:null,avatar:[],verified:!1},reply:null,medias:[],like:{count:null,url:null},date:null,mentions:[],hashtags:[],urls:[],share:[]}),"text",function(e,t){var r,n=t.id,i=t.mentions,u=t.hashtags,o=t.urls;return{html:(r=function(e,t){for(var r=e.querySelectorAll("[class*=text]"),n=0;n<r.length;n++){var a=r[n],i=s(a,"[data-tweet-id]");if(i&&t===i.getAttribute("data-tweet-id"))return a}return null}(c,n)).innerHTML,text:d(r,!0),raw:d(r),split:Array.prototype.map.call(r.childNodes,function(t){if(Node.TEXT_NODE===t.nodeType)return t.textContent;if(t.matches("img"))return t.alt;if(Node.ELEMENT_NODE===t.nodeType){var e=t.getAttribute("data-scribe");if(null===e)return"";var r=e.split(":"),n=p(r,2),a=(n[0],n[1]);return f({},function(){switch(a){case"url":return o.find(function(e){return e.url===t.href});case"hashtag":return u.find(function(e){return e.url===t.href});case"mention":return i.find(function(e){return e.url===t.href});default:return""}}(),{type:a})}})}})},h=r.parseTweets=function(e){switch(e.nodeName.toLowerCase()){case"twitter-widget":var t=e.shadowRoot.querySelector('[data-scribe="page:tweet"]');if(t)return[a(t,e.getAttribute("data-tweet-id"))];break;case"iframe":if(e.contentWindow.document.body.children.length)try{return Array.prototype.slice.call(e.contentWindow.document.body.querySelectorAll('[data-scribe="component:tweet"]')).map(function(e){return a(e)}).sort(function(e,t){return t.date-e.date})}catch(e){console.warn("Parsing error: "+e.stack)}}throw new Error("Invalid DOM")},u=r.parseCode=function(r){function t(){return u.parentNode.removeChild(u)}var u=document.createElement("iframe");return u.style.position="fixed",u.style.top="100%",new Promise(function(n,e){var a=-1,i=setTimeout(function(){clearTimeout(a),e(new Error("Failed"))},c);document.body.appendChild(u);var t=document.createElement("script");t.src="https://platform.twitter.com/widgets.js",t.async="",t.charset="utf-8",u.contentDocument.body.appendChild(t),u.contentDocument.body.innerHTML=r,function e(){var t=u.contentDocument.body.children[0];if(t)try{var r=h(t);return clearTimeout(i),n(r)}catch(e){}a=setTimeout(e,100)}()}).then(function(e){return t(),e}).catch(function(e){throw t(),e})};Object.defineProperty(n,"MS_TIMEOUT",{get:function(){return c},set:function(e){if(!(0,i.isint)(e))throw new Error("Invalid ms: "+e);c=e}}),r.default=n},{"./stdlib":2}]},{},[1]);
